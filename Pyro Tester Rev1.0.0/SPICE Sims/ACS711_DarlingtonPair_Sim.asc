Version 4
SHEET 1 880 1028
WIRE 112 -176 80 -176
WIRE 224 -176 192 -176
WIRE 80 -144 80 -176
WIRE -1008 -32 -1040 -32
WIRE -656 -32 -944 -32
WIRE -976 64 -976 32
WIRE 224 80 224 -176
WIRE 224 80 80 80
WIRE -976 96 -976 64
WIRE -1152 112 -1440 112
WIRE -1040 112 -1040 -32
WIRE -1040 112 -1072 112
WIRE -1008 112 -1040 112
WIRE -848 128 -944 128
WIRE -656 128 -656 -32
WIRE -656 128 -848 128
WIRE 16 128 -656 128
WIRE 224 128 224 80
WIRE -1984 144 -1984 96
WIRE -1664 144 -1696 144
WIRE -1456 144 -1584 144
WIRE -1008 144 -1456 144
WIRE -1696 176 -1696 144
WIRE 112 176 80 176
WIRE 160 176 112 176
WIRE -976 192 -976 160
WIRE -1984 240 -1984 208
WIRE 320 416 224 416
WIRE 224 432 224 416
WIRE 320 432 320 416
WIRE -1104 576 -1152 576
WIRE -1408 592 -1456 592
WIRE -1152 592 -1152 576
WIRE -1104 592 -1104 576
WIRE 80 592 -176 592
WIRE 224 592 224 512
WIRE 224 592 80 592
WIRE -1456 608 -1456 592
WIRE -1408 608 -1408 592
WIRE -992 608 -1072 608
WIRE -304 608 -864 608
WIRE -288 608 -304 608
WIRE -240 608 -288 608
WIRE -1280 624 -1376 624
WIRE -1168 624 -1280 624
WIRE -1136 624 -1168 624
WIRE -864 624 -864 608
WIRE -144 624 -176 624
WIRE -1664 640 -1696 640
WIRE -1488 640 -1664 640
WIRE -1440 640 -1488 640
WIRE -1040 640 -1072 640
WIRE -1344 656 -1376 656
WIRE -1168 688 -1168 624
WIRE -1040 688 -1040 640
WIRE -1040 688 -1168 688
WIRE -144 688 -144 624
WIRE 224 720 224 672
WIRE 224 720 -16 720
WIRE -992 736 -992 608
WIRE -864 736 -864 704
WIRE -864 736 -992 736
WIRE -1408 752 -1408 672
WIRE -864 752 -864 736
WIRE 224 752 224 720
WIRE -1104 768 -1104 656
WIRE -1408 784 -1408 752
WIRE -304 800 -304 608
WIRE -272 800 -304 800
WIRE -144 800 -144 688
WIRE -144 800 -192 800
WIRE -112 800 -144 800
WIRE -16 800 -16 720
WIRE -16 800 -32 800
WIRE -1184 816 -1200 816
WIRE -1104 816 -1104 768
WIRE -1200 832 -1200 816
WIRE -864 864 -864 832
WIRE -1488 880 -1488 640
WIRE -1456 880 -1488 880
WIRE -1344 880 -1344 656
WIRE -1344 880 -1376 880
WIRE -1344 896 -1344 880
WIRE 224 896 224 832
WIRE -1344 1008 -1344 976
FLAG 224 896 0
FLAG 80 -144 0
FLAG -1696 176 0
FLAG -1344 1008 0
FLAG -1664 640 FB
FLAG -1440 112 FB
FLAG -1456 144 SIG
FLAG -1280 624 ACSOUT
FLAG -288 608 PREBUF
FLAG 80 592 SENSEH
FLAG -144 688 SENSEL
FLAG -848 128 CTRL
FLAG 112 176 CTRL3
FLAG -1152 592 0
FLAG -1200 832 0
FLAG -1104 768 5V
FLAG -976 192 0
FLAG -976 64 5V
FLAG -1456 608 0
FLAG -1408 752 5V
FLAG -1984 96 5V
FLAG -1984 240 0
FLAG -864 864 0
FLAG 320 432 0
SYMBOL npn 160 128 R0
SYMATTR InstName Q1
SYMATTR Value FZT849
SYMBOL res 208 736 R0
SYMATTR InstName R1
SYMATTR Value .5R
SYMBOL res 208 576 R0
SYMATTR InstName R2
SYMATTR Value 1.2mR
SYMBOL res -16 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 1.01R
SYMBOL res -176 784 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 100R
SYMBOL OpAmps\\opamp -208 672 R180
SYMATTR InstName U1
SYMBOL voltage 208 -176 R90
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12V
SYMBOL npn 16 80 R0
SYMATTR InstName Q2
SYMATTR Value LS301
SYMBOL voltage -1568 144 R90
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PULSE(0 5 0 .00001 0 .005 1 1)
SYMBOL res -1360 864 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 8090R
SYMBOL res -1360 880 R0
SYMATTR InstName R7
SYMATTR Value 1000R
SYMBOL OpAmps\\UniversalOpamp2 -1104 624 R180
SYMATTR InstName U5
SYMBOL voltage -1088 816 R90
WINDOW 0 32 56 VTop 2
WINDOW 3 -32 56 VBottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value 12
SYMBOL OpAmps\\UniversalOpamp2 -976 128 R0
SYMATTR InstName U2
SYMATTR Value2 Avol=1Meg GBW=3Meg Slew=20Meg
SYMBOL OpAmps\\UniversalOpamp2 -1408 640 R180
SYMATTR InstName U3
SYMBOL OpAmps\\UniversalOpamp2 -1984 176 R0
SYMATTR InstName U4
SYMBOL res -880 608 R0
SYMATTR InstName R5
SYMATTR Value 1000R
SYMBOL res -880 736 R0
SYMATTR InstName R8
SYMATTR Value 215.686R
SYMBOL cap -944 -48 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1µF
SYMBOL res -1056 96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1000R
SYMBOL current 224 432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value 5
TEXT -248 920 Left 2 !.tran .01
TEXT -264 960 Left 2 !.inc opamp.sub
TEXT -456 520 Left 2 ;Gain and Buffer to\napproximate ACS711
TEXT -1464 512 Left 2 ;Opamp with \ngain 9.09
TEXT -288 -168 Left 2 ;LPF for Smoothing?
TEXT -1800 256 Left 2 ;Input: 1-5V\nOutput: 1-5A
TEXT -1320 312 Left 2 ;OPAMP Power labelled "5V" is actually running at 12V
