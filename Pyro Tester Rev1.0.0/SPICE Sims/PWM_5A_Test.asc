Version 4
SHEET 1 1632 680
WIRE -48 -320 -80 -320
WIRE 256 -320 32 -320
WIRE 288 -320 256 -320
WIRE -80 -288 -80 -320
WIRE 16 112 -80 112
WIRE 96 112 16 112
WIRE 368 112 192 112
WIRE 688 112 448 112
WIRE 688 160 688 112
WIRE -80 176 -80 112
WIRE 16 176 16 112
WIRE 176 224 176 160
WIRE 256 224 176 224
WIRE 288 224 256 224
WIRE -80 304 -80 240
WIRE 16 304 16 256
WIRE 16 304 -80 304
WIRE 96 304 16 304
WIRE 304 304 96 304
WIRE 384 304 304 304
WIRE 528 304 464 304
WIRE 688 304 688 240
WIRE 688 304 528 304
WIRE 96 352 96 304
FLAG 96 352 0
FLAG 256 224 CTRL
FLAG 256 -320 CTRL
FLAG -80 -288 0
FLAG 528 304 PREAMP
FLAG 304 304 POSTAMP
SYMBOL res 480 288 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value .1
SYMBOL res 672 144 R0
SYMATTR InstName R2
SYMATTR Value 2
SYMBOL nmos 96 160 R270
SYMATTR InstName M1
SYMATTR Value BSC118N10NS
SYMBOL voltage 16 160 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage 48 -320 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 48 0 0 0 0.00045 0.0005 500)
SYMBOL cap -96 176 R0
SYMATTR InstName C1
SYMATTR Value .0012
SYMBOL ind 352 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value 4700µ
SYMATTR SpiceLine Ipk=7 Rser=0.0774 Rpar=52752 Cpar=0
TEXT -238 376 Left 2 !.tran 1
TEXT 552 -144 Left 2 ;Need a way to sink the extra current to ground, I think
TEXT 416 8 Left 2 ;Will need flyback diodes to handle voltage spikes if R2 opens, and should also use that event to close M1
